import{r as i,a2 as M,a3 as e,a4 as j,u as C,j as s,a1 as _,B as g}from"./index-Df6GIiYg.js";import{M as H,a as N}from"./widget-B5p8lp3V.js";import{M as p,a as b,b as F,c as G,d as f}from"./widget-CZ14yfnU.js";import{u as L,N as y,a as v,b as I,F as O,S as k,c as B}from"./widget-BJtSZy4c.js";import{u as E,M as D,a as T}from"./store-D4IQGeIh.js";const $={"search-results":"_search-results_xy6bb_1"},U=()=>{var h,d,m;const[r,A]=M(),o=r.get(e.SEARCH_PAGE.SEARCH_PARAMS.PAGE),l=r.get(e.SEARCH_PAGE.SEARCH_PARAMS.NAME),u=L(l,500),S=E(t=>t.searchLimit),P=E(t=>t.searchFormat),a=j({name:u??void 0,page:o?Number(o):void 0,limit:S}),R=((h=a.data)==null?void 0:h.count)??0,n=Number(r.get(e.SEARCH_PAGE.SEARCH_PARAMS.PAGE)??1),c=Math.ceil(R/S);i.useEffect(()=>{a.isSuccess&&n>c&&A(t=>({[e.SEARCH_PAGE.SEARCH_PARAMS.PAGE]:"1",[e.SEARCH_PAGE.SEARCH_PARAMS.NAME]:t.get(e.SEARCH_PAGE.SEARCH_PARAMS.NAME)??""}))},[n,c,a.isSuccess]);const x=C(()=>{A(t=>({...Object.fromEntries(t),[e.SEARCH_PAGE.SEARCH_PARAMS.PAGE]:"1",[e.SEARCH_PAGE.SEARCH_PARAMS.NAME]:""}))});return s.jsxs("div",{className:$["search-results"],children:[s.jsx(_,{visible:a.isFetching,position:"absolute",description:"Loading notes"}),a.isSuccess&&!((d=a.data.data)!=null&&d.length)&&s.jsxs(y,{children:[s.jsx(v,{children:"No notes found"}),u&&o&&s.jsx(I,{children:s.jsx(g,{onClick:x,children:"Clear your search and try again"})})]}),a.isSuccess&&!!((m=a.data.data)!=null&&m.length)&&s.jsxs(i.Fragment,{children:[s.jsx(O,{notes:a.data.data,format:P}),s.jsx(k,{currentPage:n,maximumPage:c})]})]})},V=i.memo(U),q=()=>s.jsxs(p,{children:[s.jsx(b,{children:s.jsx(H,{})}),s.jsxs(F,{children:[s.jsx(D,{children:s.jsx(T,{children:"Search"})}),s.jsxs(N,{children:[s.jsx(B,{}),s.jsx(V,{})]})]}),s.jsx(G,{children:s.jsx(f,{})})]}),W=q;export{W as SearchPage};
